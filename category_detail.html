{% load static %}
{% load custom_tags %}
<html>
    <head>
        <meta charset="utf-8">
        <title>{{category.name}} - ITExtra</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;1,400&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'home/landing.css' %}">
        <link rel="stylesheet" href="{% static 'home/landing_2.css' %}">
        <link rel="stylesheet" href="{% static 'home/header.css'%}">
        <link rel="stylesheet" href="{% static 'home/custommenus.css'%}">
        <link rel="stylesheet" href="{% static 'home/custombuttons.css'%}">
        
        <link rel="stylesheet" href="{% static 'itextra.css'%}">

        {% comment %} 
            Font awesome 
        {% endcomment %}
        <script src="{% static 'js/fa/all.js' %}" type="text/javascript"></script>
        <link href="{% static 'css/fa/all.css' %}" rel="stylesheet" type="text/css"/>
        {% comment %} 
            Bootstrap
        {% endcomment %}
        <script src="{% static 'js/bootstrap/bootstrap.bundle.js' %}" type="text/javascript"></script>
        <link href="{% static 'css/bootstrap/bootstrap.css' %}" rel="stylesheet" type="text/css"/>
        {% comment %} 
            JQuery
        {% endcomment %}
        <script src="{% static 'js/jquery.js' %}" type="text/javascript"></script>
    
        <style>
            body{
                background: -webkit-gradient(linear, top left, bottom left, from(#222222), to(#666666));
                background: -webkit-linear-gradient(#222222, #666666);
                background: linear-gradient(#222222,#666666);
            }
            .django-ckeditor-widget{
                width:100% !important;
            }
            .container-xl{
                margin-bottom:10% !important;
            }
            .wave-a .wave:before{
                background: url({% static 'media/wave.png' %});
            }    
            .wave-a{
                transition: all 2s !important;
            }
            .wave{
                transition: all 2s !important;
            }
            .category-title {
                width:100%;
                padding:20px 40px; 
                background-color: #9200ff;
                border-radius:10px;
                margin: auto;
            }
        
            .question {
                padding: 1.75rem 3rem 1.75rem 0;
                position: relative;
                transition: .25s ease;
                border-top: 1px solid rgba(0,85,92,.1);
                list-style-type: none !important;
            }
            .hidden{
                display: none;
            }
            .accordion_static{
                padding: 10px;
                border-radius: 10px;
                font-family: Helvetica;
            }
            .accordion_static__question question{
                margin: 5px;
                padding: 10px;
                font-size: 2.5em;
                font-weight: bold;
                border-radius: 10px; 
                border: 1px solid #9200ff;
                display: flex;
                overflow: hidden;
            }
            .accordion_static__answer{
                margin: 5px;
                padding: 10px;
                font-size: large;
                border-radius: 10px; 
                border: 1px solid #bbbbbb;
            }
            .accordion_static:hover{
                cursor: pointer;
            }
            .accordion_static__answer {
                display: none;
            } 
            .accordion_static.active .accordion_static__answer {
                display: block;
            }
            .content img{
                display:none;
            }
            .accordion {
                background-color: white;
                cursor: pointer;
                padding: 18px;
                width: 100%;
                border: none;
                text-align: left;
                outline: none;
                font-size: 15px;
                transition: 0.4s;
                color: black;
              }
              
              .active-projects, .accordion:hover {
                background-color: #cccccc;
                border: none;
              }
              
              .accordion:after {
                content: '\002B';
                color: #777;
                font-weight: bold;
                float: right;
                margin-left: 5px;
                border: none;
              }
              
              .accordion.active:after {
                content: "\2212";
              }
              
              .panel {
                padding: 0 18px;
                background-color: white;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.2s ease-out;
              }
              .loading{
                width: 100%;
                height: 3px;
                background-color: #9200ff;
                animation: line 2s infinite alternate;
            }
            .vertflex{
                display: flex;
            }
            @keyframes line{
                0%{
                    transform: scaleX(0);
                    transform-origin: left;
                }
                45%{
                    transform: scaleX(1);
                    transform-origin: left;
                }
                50%{
                    transform: scaleX(1);
                    transform-origin: right;
                }
                55%{
                    transform: scaleX(1);
                    transform-origin: right;
                }
                100%{
                    transform: scaleX(0);
                    transform-origin: right;
                }
            }
            .hidden{
                display: none;
            }

        </style>
    </head>
    <body style="color:white;">
            <div id="menu" class="dropup" style="float:right;">
                <a onClick="goBack('{{previous_url}}')" class="dropupbtn" style="cursor:pointer;"><i class="fa-solid fa-arrow-left"></i></a>
            </div>
        
            <div class="container" style="margin-top:2%;">
                <div class="row">
                    <div class="row">
                        
                        <div class="col-md-2">
                            <a class="slideanimation-left mb-4" style="display:flex;width:180px;cursor:pointer;" onclick="goBack('{{previous_url}}')">Terug</a>
                        </div>
                        <div class="col-10">
                            <div class="layout">
                                <div class="accordion_static noselect">
                                    <div class="accordion_static__question">
                                        <question class="wave-a">{{category.name}}
                                            <div class="wave"></div>
                                        </question>
                                    </div>
                                    <div class="accordion_static__answer">
                                        {{category.description|safe}}
                                    </div>
                                </div>
                            </div>
    
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div id="myspinner" class="loading" role="status" style="margin-bottom:2%;">
                        </div>

                        <div class="cards-container" id="list-wrapper" style="color:black;">
                            {% comment %} {% for post in object_list %} {% endcomment %}
                                {% comment %} {% include 'cards.html' %} {% endcomment %}
                            {% comment %} {% endfor %} {% endcomment %}
                        </div>
                    </div>
                    
                </div>
            </div>
            <script defer src="{% static 'api_categories.js' %}" type="text/javascript"></script>
            <script>
                function goBack(path){
                    window.location.href = path;
                }
    
                function getCookie(name) {
                    let cookieValue = null;
                    if (document.cookie && document.cookie !== '') {
                        const cookies = document.cookie.split(';');
                        for (let i = 0; i < cookies.length; i++) {
                            const cookie = cookies[i].trim();
                            // Does this cookie string begin with the name we want?
                            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                break;
                            }
                        }
                    }
                    return cookieValue;
                }
                const csrftoken = getCookie('csrftoken');
                
                var category_slug = '{{ category.slug }}';
                loadCategoryPosts()
                function loadCategoryPosts(){
                    $.ajax({
                        type: "POST",
                        url: "{% url 'api:categoryprojects' %}",
                        data: {
                            category:category_slug,
                            csrfmiddlewaretoken:csrftoken
                        },
                        success: function(data){
                            var list = data.results
                            for(var i in list){
                                item = buildDataList(list, i)
                                wrapper.innerHTML += item;
                    
                            }
                            createButton(data)
                            let answers = document.querySelectorAll(".accordion_static");
                            answers.forEach((event) => {
                              event.addEventListener("click", () => {
                                if (event.classList.contains("active")) {
                                  event.classList.remove("active");
                                } else {
                                    answers.forEach((event) => {
                                        event.classList.remove("active");
                                    });
                                  event.classList.add("active");
                                }
                              });
                            });
                            createAccordion()
                            myspinner.classList.add('hidden')
            
                        }
                    });
                }
                function loadMore_Category(url){
                    myspinner.classList.remove('hidden')
    
                    $.ajax({
                        type: "POST",
                        url: url,
                        data: {
                            category:category_slug,
                            csrfmiddlewaretoken:csrftoken
                        },
                        success: function(data){
                            var list = data.results
                            for(var i in list){
                                item = buildDataList(list, i)
                                wrapper.innerHTML += item;
                    
                            }
                            createButton(data)
                            createAccordion()
                            myspinner.classList.add('hidden')
                        }
                    });
                }

            </script>
    
    </body>
</html>

